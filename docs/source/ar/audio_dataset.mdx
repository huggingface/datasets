# ุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ 

ููููู ูุดุงุฑูุฉ ูุฌููุนุฉ ุจูุงูุงุช ูุน ูุฑููู ุฃู ูุน ุฃู ุดุฎุต ูู ุงููุฌุชูุน ูู ุฎูุงู ุฅูุดุงุก ูุณุชูุฏุน ููุฌููุนุฉ ุงูุจูุงูุงุช ุนูู Hugging Face Hub: 

ููุงู ุนุฏุฉ ุทุฑู ูุฅูุดุงุก ููุดุงุฑูุฉ ูุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ: 

- ุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ ูู ูููุงุช ูุญููุฉ ูู ุจุงูุซูู ุจุงุณุชุฎุฏุงู [Dataset.push_to_hub]. ูุฐู ุทุฑููุฉ ุณููุฉ ุชุชุทูุจ ููุท ุจุถุน ุฎุทูุงุช ูู ุจุงูุซูู. 

- ุฅูุดุงุก ูุณุชูุฏุน ููุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุฅูุดุงุก AudioFolder. ูุฐุง ุญู ุจุฏูู ููุฏ ูุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ ุจุณุฑุนุฉ ูุน ุนุฏุฉ ุขูุงู ูู ูููุงุช ุงูุตูุช. 

<Tip> 

ููููู ุงูุชุญูู ูู ุงููุตูู ุฅูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูู ุฎูุงู ูุทุงูุจุฉ ุงููุณุชุฎุฏููู ุจูุดุงุฑูุฉ ูุนูููุงุช ุงูุงุชุตุงู ุงูุฎุงุตุฉ ุจูู ุฃููุงู. ุฑุงุฌุน ุฏููู [ูุฌููุนุงุช ุงูุจูุงูุงุช ุงููุญููุฉ](https://huggingface.co/docs/hub/datasets-gated) ููุฒูุฏ ูู ุงููุนูููุงุช ุญูู ููููุฉ ุชูููู ูุฐู ุงูููุฒุฉ ุนูู Hub. 

</Tip> 

## ุงููููุงุช ุงููุญููุฉ 

ููููู ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุจุงุณุชุฎุฏุงู ูุณุงุฑุงุช ูููุงุช ุงูุตูุช ุงูุฎุงุตุฉ ุจู. ุงุณุชุฎุฏู ุฏุงูุฉ [~Dataset.cast_column] ูุฃุฎุฐ ุนููุฏ ูู ูุณุงุฑุงุช ูููุงุช ุงูุตูุชุ ูุชุญูููู ุฅูู ููุฒุฉ [Audio]. 

```py
>>> audio_dataset = Dataset.from_dict({"audio": ["path/to/audio_1", "path/to/audio_2", ..., "path/to/audio_n"]}).cast_column("audio", Audio())
>>> audio_dataset[0]["audio"]
{'array': array([ 0.        ,  0.00024414, -0.00024414, ..., -0.00024414,
0.        ,  0.        ], dtype=float32),
'path': 'path/to/audio_1',
'sampling_rate': 16000}
``` 

ุซู ูู ุจุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุฅูู Hugging Face Hub ุจุงุณุชุฎุฏุงู [Dataset.push_to_hub]: 

```py
audio_dataset.push_to_hub("<username>/my_dataset")
``` 

ุณูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ูุณุชูุฏุน ููุฌููุนุฉ ุจูุงูุงุช ูุญุชูู ุนูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุฎุงุตุฉ ุจู: 

```
my_dataset/
โโโ README.md
โโโ data/
    โโโ train-00000-of-00001.parquet
```

## AudioFolder 

AudioFolder ูู ุฃุฏุงุฉ ูุฅูุดุงุก ูุฌููุนุงุช ุจูุงูุงุช ูุตููุฉ ูุชุญููู ูุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ ุชุญุชูู ุนูู ุนุฏุฉ ุขูุงู ูู ูููุงุช ุงูุตูุช ุฏูู ุงูุญุงุฌุฉ ุฅูู ูุชุงุจุฉ ุฃู ููุฏ. 

ูุชู ุชุญููู ุฃู ูุนูููุงุช ุฅุถุงููุฉ ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู - ูุซู ุงููุต ุงูููุชูุจุ ุฃู ููุฌุฉ ุงููุชุญุฏุซุ ุฃู ููุฉ ุงููุชุญุฏุซ - ุชููุงุฆููุง ุจูุงุณุทุฉ AudioFolder ุทุงููุง ุฃูู ุชุฏุฑุฌ ูุฐู ุงููุนูููุงุช ูู ููู ุจูุงูุงุช ูุตููุฉ (`metadata.csv` / `metadata.jsonl`). 

<Tip> 

๐ก ุงุทูุน ุนูู [ุชุณูุณู ูุฑูู ูุฃููุงุท ุงูุชูุณูู](repository_structure#split-pattern-hierarchy) ููุนุฑูุฉ ุงููุฒูุฏ ุญูู ููููุฉ ุฅูุดุงุก AudioFolder ูุชูุณููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช ุจูุงุกู ุนูู ูููู ูุณุชูุฏุน ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. 

</Tip> 

ูู ุจุฅูุดุงุก ูุณุชูุฏุน ููุฌููุนุฉ ุจูุงูุงุช ุนูู Hugging Face Hub ูุชุญููู ุฏููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุจุงุชุจุงุน ูููู AudioFolder: 

```
my_dataset/
โโโ README.md
โโโ metadata.csv
โโโ data/
``` 

ูููู ุฃู ูููู ุงุณู ูุฌูุฏ `data` ุฃู ุงุณู ุชุฑูุฏู. 

<Tip> 

ูุฏ ูููู ูู ุงููููุฏ ุชุฎุฒูู ุงูุจูุงูุงุช ุงููุตููุฉ ุงูุฎุงุตุฉ ุจู ุนูู ุฃููุง ููู `jsonl` ุฅุฐุง ูุงูุช ุฃุนูุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู ุชูุณูู ุฃูุซุฑ ุชุนููุฏูุง (ูุซู ูุงุฆูุฉ ูู ุงูุฃุฑูุงู ุงูุนุงุฆูุฉ) ูุชุฌูุจ ุฃุฎุทุงุก ุงูุชุญููู ุฃู ูุฑุงุกุฉ ุงูููู ุงููุนูุฏุฉ ูุณูุงุณู. 

</Tip> 

ูุฌุจ ุฃู ูุชุถูู ููู ุงูุจูุงูุงุช ุงููุตููุฉ ุนููุฏ `file_name` ูุฑุจุท ููู ุตูุชู ุจุงูุจูุงูุงุช ุงููุตููุฉ ุงูุฎุงุตุฉ ุจู: 

```csv
file_name,transcription
data/first_audio_file.mp3,znowu siฤ duch z ciaลem zroลnie w mลodocianej wstaniesz wiosnie i moลผesz skutkiem tych lekรณw umieraฤ wstawaฤ wiek wiekรณw dalej tam byลy przestrogi jak siekaฤ gลowฤ jak nogi
data/second_audio_file.mpmp3,juลผ u ลบwierzyลca podwojรณw krรณl zasiada przy nim ksiฤลผฤta i panowie rada a gdzie wzniosลy krฤลผyล ganek rycerze obok kochanek krรณl skinฤล palcem zaczฤto igrzysko
data/third_audio_file.mp3,pewnie kฤdyล w obลฤdzie ubite minฤลy szlaki zaczekajmy dzieล jaki poลlemy szukaฤ wszฤdzie dziล jutro pewnie bฤdzie posลali wszฤdzie sลugi czekali dzieล i drugi gdy nic nie doczekali z pลaczem chcฤ jechaฤ dali
``` 

ุจุนุฏ ุฐููุ ููููู ุชุฎุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูู ูููู ุฏููู ูุซู ูุฐุง: 

```
metadata.csv
data/first_audio_file.mp3
data/second_audio_file.mp3
data/third_audio_file.mp3
``` 

ูููู ูููุณุชุฎุฏููู ุงูุขู ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูุงูุจูุงูุงุช ุงููุตููุฉ ุงููุฑุชุจุทุฉ ุจูุง ูู ุฎูุงู ุชุญุฏูุฏ `audiofolder` ูู [load_dataset] ููุฌูุฏ ูุฌููุนุฉ ุงูุจูุงูุงุช ูู `data_dir`: 

```py
>>> from datasets import load_dataset
>>> dataset = load_dataset("audiofolder", data_dir="/path/to/data")
>>> dataset["train"][0]
{'audio':
    {'path': '/path/to/extracted/audio/first_audio_file.mp3',
    'array': array([ 0.00088501,  0.0012207 ,  0.00131226, ..., -0.00045776, -0.00054932, -0.00054932], dtype=float32),
    'sampling_rate': 16000},
 'transcription': 'znowu siฤ duch z ciaลem zroลnie w mลodocianej wstaniesz wiosnie i moลผesz skutkiem tych lekรณw umieraฤ wstawaฤ wiek wiekรณw dalej tam byลy przestrogi jak siekaฤ gลowฤ jak nogi'
}
``` 

ููููู ุฃูุถูุง ุงุณุชุฎุฏุงู `audiofolder` ูุชุญููู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชู ุชูุทูู ุนูู ุชูุณููุงุช ูุชุนุฏุฏุฉ. ููููุงู ุจุฐููุ ูุฏ ูููู ูููู ุฏููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุนูู ุงููุญู ุงูุชุงูู: 

```
data/train/first_train_audio_file.mp3
data/train/second_train_audio_file.mp3

data/test/first_test_audio_file.mp3
data/test/second_test_audio_file.mp3
``` 

<Tip warning={true}> 

ูุงุญุธ ุฃูู ุฅุฐุง ูู ุชูู ูููุงุช ุงูุตูุช ููุฌูุฏุฉ ุจุฌูุงุฑ ููู ุงูุจูุงูุงุช ุงููุตููุฉุ ููุฌุจ ุฃู ูููู ุนููุฏ `file_name` ูุณุงุฑูุง ูุณุจููุง ูุงูููุง ุฅูู ููู ุตูุชูุ ูููุณ ูุฌุฑุฏ ุงุณู ุงูููู. 

</Tip> 

ุจุงููุณุจุฉ ููุฌููุนุงุช ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุชู ูุง ุชุญุชูู ุนูู ุจูุงูุงุช ูุตููุฉ ูุฑุชุจุทุฉ ุจูุงุ ูุณุชูุชุฌ AudioFolder ุชููุงุฆููุง ุชุณููุงุช ุงููุฆุงุช ููุฌููุนุฉ ุงูุจูุงูุงุช ุจูุงุกู ุนูู ุงุณู ุงูุฏููู. ูุฏ ูููู ูุฐุง ูููุฏูุง ูููุงู ุชุตููู ุงูุตูุช. ูุฏ ูุจุฏู ูููู ุฏููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ููุง ููู: 

```
data/train/electronic/01.mp3
data/train/punk/01.mp3

data/test/electronic/09.mp3
data/test/punk/09.mp3
``` 

ูู ุจุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู AudioFolderุ ูุณูููู ุจุฅูุดุงุก ุนููุฏ `label` ูู ุงุณู ุงูุฏููู (ูุนุฑู ุงููุบุฉ): 

```py
>>> from datasets import load_dataset
>>> dataset = load_dataset("audiofolder", data_dir="/path/to/data")
>>> dataset["train"][0]
{'audio':
    {'path': '/path/to/electronic/01.mp3',
     'array': array([ 3.9714024e-07,  7.3031038e-07,  7.5640685e-07, ...,
         -1.1963668e-01, -1.1681189e-01, -1.1244172e-01], dtype=float32),
     'sampling_rate': 44100},
 'label': 0  # "electronic"
}
>>> dataset["train"][-1]
{'audio':
    {'path': '/path/to/punk/01.mp3',
     'array': array([0.15237972, 0.13222949, 0.10627693, ..., 0.41940814, 0.37578005,
         0.33717662], dtype=float32),
     'sampling_rate': 44100},
 'label': 1  # "punk"
}
``` 

<Tip warning={true}> 

ุฅุฐุง ูุงูุช ุฌููุน ูููุงุช ุงูุตูุช ููุฌูุฏุฉ ูู ูุฌูุฏ ูุงุญุฏ ุฃู ุฅุฐุง ูู ุชูู ุนูู ููุณ ูุณุชูู ูููู ุงูุฏูููุ ููู ูุชู ุฅุถุงูุฉ ุนููุฏ `label` ุชููุงุฆููุง. ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูููุ ููู ุจุชุนููู `drop_labels=False` ุจุดูู ุตุฑูุญ. 

</Tip> 

<Tip> 

ุชุชููุฑ ุจุนุถ ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุตูุชูุฉุ ูุซู ุชูู ุงูููุฌูุฏุฉ ูู [ูุณุงุจูุงุช Kaggle](https://www.kaggle.com/competitions/kaggle-pog-series-s01e02/overview)ุ ุนูู ูููุงุช ุจูุงูุงุช ูุตููุฉ ูููุตูุฉ ููู ุชูุณูู. ุดุฑูุทุฉ ุฃู ุชููู ููุฒุงุช ุงูุจูุงูุงุช ุงููุตููุฉ ูู ููุณูุง ููู ุชูุณููุ ูููู ุงุณุชุฎุฏุงู audiofolder ูุชุญููู ุฌููุน ุงูุชูุณููุงุช ูุฑุฉ ูุงุญุฏุฉ. ุฅุฐุง ุงุฎุชููุช ููุฒุงุช ุงูุจูุงูุงุช ุงููุตููุฉ ุนุจุฑ ูู ุชูุณููุ ููุฌุจ ุชุญููููุง ุจุงุณุชุฎุฏุงู ููุงููุงุช `load_dataset()` ูููุตูุฉ. 

</Tip> 

## (ูุฏูู) ูุต ุงูุจุฑูุงูุฌ ุงููุตู ููุชุญููู 

ุงูุชุจ ูุต ุจุฑูุงูุฌ ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ูุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ูุฏูููุง. 

ูุญุฏุฏ ูุต ุงูุจุฑูุงูุฌ ุงููุตู ุชูุณููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช ูุชููููุงุชูุงุ ููุชุนุงูู ูุน ุชูุฒูู ูุชูููุฏ ุฃูุซูุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช. 

ูุฌุจ ุฃู ูููู ููุต ุงูุจุฑูุงูุฌ ุงููุตู ููุณ ุงุณู ูุฌูุฏ ูุฌููุนุฉ ุงูุจูุงูุงุช ุฃู ุงููุณุชูุฏุน ุงูุฎุงุต ุจู: 

```
my_dataset/
โโโ README.md
โโโ my_dataset.py
โโโ data/
``` 

ูููู ุฃู ูููู ุงุณู ูุฌูุฏ `data` ุฃู ุงุณู ุชุฑูุฏูุ ููุง ูุฌุจ ุฃู ูููู `data`. ูุฐุง ุงููุฌูุฏ ุงุฎุชูุงุฑูุ ูุง ูู ุชูู ุชุณุชุถูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุนูู Hub. 

ูุณูุญ ูููู ุงูุฏููู ูุฐุง ุจุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูู ุณุทุฑ ูุงุญุฏ: 

```py
>>> from datasets import load_dataset
>>> dataset = load_dataset("path/to/my_dataset")
``` 

ุณููุถุญ ูุฐุง ุงูุฏููู ููููุฉ ุฅูุดุงุก ูุต ุจุฑูุงูุฌ ูุตู ููุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉุ ููู ูุฎุชูู ููููุงู ุนู <a class="underline decoration-green-400 decoration-2 font-semibold" href="./dataset_script">ุฅูุดุงุก ูุต ุจุฑูุงูุฌ ูุตู ููุฌููุนุงุช ุงูุจูุงูุงุช ุงููุตูุฉ</a>. 

ุชูุฎุฒู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุนุงุฏุฉู ูู ุฃุฑุดููุงุช `tar.gz` ูุงูุชู ุชุชุทูุจ ููุฌูุง ุฎุงุตูุง ูุฏุนู ูุถุน ุงูุชุฏูู. ูู ุญูู ุฃู ุงูุชุฏูู ุบูุฑ ูุทููุจุ ูุฅููุง ูุดุฌุน ุจุดุฏุฉ ุนูู ุชูููุฐ ุฏุนู ุงูุชุฏูู ูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุฎุงุตุฉ ุจู ุญุชู ูุชููู ุงููุณุชุฎุฏููู ุงูุฐูู ููุณ ูุฏููู ุงููุซูุฑ ูู ูุณุงุญุฉ ุงููุฑุต ูู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุฏูู ุชูุฒูููุง. ุชุนุฑู ุนูู ุงููุฒูุฏ ุญูู ุงูุชุฏูู ูู ุฏููู [Stream](./stream)! 

ูููุง ููู ูุซุงู ุจุงุณุชุฎุฏุงู ุฃุฑุดููุงุช TAR: 

```
my_dataset/
โโโ README.md
โโโ my_dataset.py
โโโ data/
    โโโ train.tar.gz
    โโโ test.tar.gz
    โโโ metadata.csv
``` 

ุจุงูุฅุถุงูุฉ ุฅูู ุชุนูู ููููุฉ ุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ูุงุจูุฉ ููุชุฏููุ ุณุชุชุนูู ุฃูุถูุง ููููุฉ: 

- ุฅูุดุงุก ูุฆุฉ ููุดุฆ ูุฌููุนุฉ ุจูุงูุงุช. 
- ุฅูุดุงุก ุชููููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช. 
- ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงููุตููุฉ ููุฌููุนุฉ ุงูุจูุงูุงุช. 
- ุชูุฒูู ูุชุญุฏูุฏ ุชูุณููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช. 
- ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช. 
- ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุฅูู Hub. 

ุฃูุถู ุทุฑููุฉ ููุชุนูู ูู ูุชุญ ูุต ุจุฑูุงูุฌ ูุตู ููุฌููุนุฉ ุจูุงูุงุช ุตูุชูุฉ ููุฌูุฏุฉุ ูุซู [Vivos](https://huggingface.co/datasets/vivos/blob/main/vivos.py)ุ ูุงุชุจุงุน ุงูุชุนูููุงุช! 

<Tip warning=True> 

ููุถุญ ูุฐุง ุงูุฏููู ููููุฉ ูุนุงูุฌุฉ ุจูุงูุงุช ุงูุตูุช ุงููุฎุฒูุฉ ูู ุฃุฑุดููุงุช TAR - ููู ุงูุญุงูุฉ ุงูุฃูุซุฑ ุดููุนูุง ููุฌููุนุงุช ุงูุจูุงูุงุช ุงูุตูุชูุฉ. ุฑุงุฌุน ูุฌููุนุฉ ุจูุงูุงุช [minds14](https://huggingface.co/datasets/PolyAI/minds14/blob/main/minds14.py) ููุญุตูู ุนูู ูุซุงู ููุต ุจุฑูุงูุฌ ูุตู ุตูุชู ูุณุชุฎุฏู ุฃุฑุดููุงุช ZIP. 

</Tip> 

<Tip> 

ููุณุงุนุฏุชู ุนูู ุงูุจุฏุกุ ูููุง ุจุฅูุดุงุก ูุงูุจ [ูุต ุจุฑูุงูุฌ ูุตู](https://github.com/huggingface/datasets/blob/main/templates/new_dataset_script.py) ููููู ูุณุฎู ูุงุณุชุฎุฏุงูู ูููุทุฉ ุจุฏุงูุฉ! 

</Tip> 

### ุฅูุดุงุก ูุฆุฉ ููุดุฆ ูุฌููุนุฉ ุจูุงูุงุช 

[GeneratorBasedBuilder] ูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ููุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ูููุฏ ูุงููุณ. ุฏุงุฎู ูุฐู ุงููุฆุฉุ ููุงู ุซูุงุซ ุทุฑู ูููุณุงุนุฏุฉ ูู ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู: 

- `_info` ุชุฎุฒู ูุนูููุงุช ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูุซู ุงููุตู ูุงูุชุฑุฎูุต ูุงูููุฒุงุช. 
- `_split_generators` ูููู ุจุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ุชูุณููุงุชูุง. 
- `_generate_examples` ูููู ุจุชูููุฏ ุนููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ุงูุตูุช ูุงูููุฒุงุช ุงูุฃุฎุฑู ุงููุญุฏุฏุฉ ูู `info` ููู ุชูุณูู. 

ุงุจุฏุฃ ุจุฅูุดุงุก ูุฆุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ููุฆุฉ ูุฑุนูุฉ ูู [GeneratorBasedBuilder] ูุฃุถู ุงูุทุฑู ุงูุซูุงุซ. ูุง ุชููู ุจุดุฃู ููุก ูู ูู ูุฐู ุงูุทุฑู ุจุนุฏุ ุณุชุทูุฑูุง ุนูู ูุฏุงุฑ ุงูุฃูุณุงู ุงูููููุฉ ุงูุชุงููุฉ: 

```py
class VivosDataset(datasets.GeneratorBasedBuilder):
    """VIVOS is a free Vietnamese speech corpus consisting of 15 hours of recording speech prepared for
    Vietnamese Automatic Speech Recognition task."""

    def _info(self):

    def _split_generators(self, dl_manager):

    def _generate_examples(self, prompts_path, path_to_clips, audio_files):

``` 

#### ุชููููุงุช ูุชุนุฏุฏุฉ 

ูู ุจุนุถ ุงูุญุงูุงุชุ ูุฏ ูููู ููุฌููุนุฉ ุงูุจูุงูุงุช ุฃูุซุฑ ูู ุชูููู ูุงุญุฏ. ุนูู ุณุจูู ุงููุซุงูุ ุชุญุชูู ูุฌููุนุฉ ุจูุงูุงุช [LibriVox Indonesia](https://huggingface.co/datasets/indonesian-nlp/librivox-indonesia) ุนูู ุนุฏุฉ ุชููููุงุช ุชุชูุงูู ูุน ูุบุงุช ูุฎุชููุฉ. 

ูุฅูุดุงุก ุชููููุงุช ูุฎุชููุฉุ ุงุณุชุฎุฏู ูุฆุฉ [BuilderConfig] ูุฅูุดุงุก ูุฆุฉ ูุฑุนูุฉ ููุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. ุงููุนููุฉ ุงููุญูุฏุฉ ุงููุทููุจุฉ ูู `name` ููุชููููุ ูุงูุชู ูุฌุจ ุชูุฑูุฑูุง ุฅูู ูููุฏ ุงูุชูููู ุงููุงุฆู `__init__()`. ูุฅูุงุ ูููููู ุชุญุฏูุฏ ุฃู ูุนููุงุช ูุฎุตุตุฉ ุชุฑูุฏูุง ูู ูุฆุฉ ุงูุชูููู ุงูุฎุงุตุฉ ุจู. 

```py
class LibriVoxIndonesiaConfig(datasets.BuilderConfig):
    """BuilderConfig for LibriVoxIndonesia."""

    def __init__(self, name, version, **kwargs):
        self.language = kwargs.pop("language", None)
        self.release_date = kwargs.pop("release_date", None)
        self.num_clips = kwargs.pop("num_clips", None)
        self.num_speakers = kwargs.pop("num_speakers", None)
        self.validated_hr = kwargs.pop("validated_hr", None)
        self.total_hr = kwargs.pop("total_hr", None)
        self.size_bytes = kwargs.pop("size_bytes", None)
        self.size_human = size_str(self.size_bytes)
        description = (
            f"LibriVox-Indonesia speech to text dataset in {self.language} released on {self.release_date}. "
            f"The dataset comprises {self.validated_hr} hours of transcribed speech data"
        )
        super(LibriVoxIndonesiaConfig, self).__init__(
            name=name,
            version=datasets.Version(version),
            description=description,
            **kwargs,
        )
``` 

ูู ุจุชุนุฑูู ุชููููุงุชู ูู ูุชุบูุฑ ุงููุฆุฉ `BUILDER_CONFIGS` ุฏุงุฎู [GeneratorBasedBuilder]. ูู ูุฐุง ุงููุซุงูุ ูููู ุงููุคูู ุจุงุณุชูุฑุงุฏ ุงููุบุงุช ูู ููู [release_stats.py] ูููุตู [file](https://huggingface.co/datasets/indonesian-nlp/librivox-indonesia/blob/main/release_stats.py) ูู ูุณุชูุฏุนููุ ุซู ูููู ุจุงูุญููุฉ ุนุจุฑ ูู ูุบุฉ ูุฅูุดุงุก ุชูููู: 

```py
class LibriVoxIndonesia(datasets.GeneratorBasedBuilder):
    DEFAULT_CONFIG_NAME = "all"

    BUILDER_CONFIGS = [
        LibriVoxIndonesiaConfig(
            name=lang,
            version=STATS["version"],
            language=LANGUAGES[lang],
            release_date=STATS["date"],
            num_clips=lang_stats["clips"],
            num_speakers=lang_stats["users"],
            total_hr=float(lang_stats["totalHrs"]) if lang_stats["totalHrs"] else None,
            size_bytes=int(lang_stats["size"]) if lang_stats["size"] else None,
        )
        for lang, lang_stats in STATS["locales"].items()
    ]
```
ุนุงุฏุฉูุ ูุญุชุงุฌ ุงููุณุชุฎุฏููู ุฅูู ุชุญุฏูุฏ ุชูููู ููุชุญููู ูู [load_dataset]ุ ูุฅูุง ูุณูุชู ุธููุฑ ุฎุทุฃ ValueError. ููููู ุชุฌูุจ ุฐูู ุนู ุทุฑูู ุชุนููู ุชูููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ ููุชุญููู ูู DEFAULT_CONFIG_NAME.

ุงูุขู ุฅุฐุง ุฃุฑุงุฏ ุงููุณุชุฎุฏููู ุชุญููู ุงูุชูููู ุงูุจุงูู ( bal ) ุ ููููููู ุงุณุชุฎุฏุงู ุงุณู ุงูุชูููู:

```py
>>> from datasets import load_dataset
>>> dataset = load_dataset("indonesian-nlp/librivox-indonesia", "bal", split="train")
```

## ุฅุถุงูุฉ ุจูุงูุงุช ูุตููุฉ ูููุฌููุนุฉ ุงูุจูุงูุงุช

ุฅู ุฅุถุงูุฉ ูุนูููุงุช ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุชุณุงุนุฏ ุงููุณุชุฎุฏููู ุนูู ูุนุฑูุฉ ุงููุฒูุฏ ุนููุง. ูุชู ุชุฎุฒูู ูุฐู ุงููุนูููุงุช ูู ูุฆุฉ [DatasetInfo] ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ ุทุฑููุฉ "info". ูููู ูููุณุชุฎุฏููู ุงููุตูู ุฅูู ูุฐู ุงููุนูููุงุช ุนู ุทุฑูู:

```py
>>> from datasets import load_dataset_builder
>>> ds_builder = load_dataset_builder("vivos")
>>> ds_builder.info
```

ููุงู ุงููุซูุฑ ูู ุงููุนูููุงุช ุงูุชู ููููู ุชุถููููุง ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุ ูููู ุจุนุถ ุงูุนูุงุตุฑ ุงููููุฉ ูู:

1. `description` ููุฏู ูุตููุง ููุฌุฒูุง ููุฌููุนุฉ ุงูุจูุงูุงุช.
2. `features` ุชุญุฏุฏ ุฃููุงุน ุฃุนูุฏุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช. ูุธุฑูุง ูุฃูู ุชููู ุจุฅูุดุงุก ุจุฑูุงูุฌ ุชุญููู ุตูุชูุ ูุณุชุญุชุงุฌ ุฅูู ุชุถููู ููุฒุฉ [Audio] ููุนุฏู ุฃุฎุฐ ุงูุนููุงุช ููุฌููุนุฉ ุงูุจูุงูุงุช.
3. `homepage` ููุฏู ุฑุงุจุทูุง ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุฌููุนุฉ ุงูุจูุงูุงุช.
4. `license` ุชุญุฏุฏ ุงูุฃุฐููุงุช ูุงุณุชุฎุฏุงู ูุฌููุนุฉ ุงูุจูุงูุงุช ููุง ูู ูุญุฏุฏ ูู ููุน ุงูุชุฑุฎูุต.
5. `citation` ูู ุงูุชุจุงุณ BibTeX ููุฌููุนุฉ ุงูุจูุงูุงุช.

<Tip>
ุณุชูุงุญุธ ุฃู ุงููุซูุฑ ูู ูุนูููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช ูุญุฏุฏุฉ ูุณุจููุง ูู ุจุฑูุงูุฌ ุงูุชุญูููุ ููุง ูุฌุนูู ุฃุณูู ูู ุงููุฑุงุกุฉ. ููุงู ุฃูุถูุง ููุฒุงุช [~Dataset.Features] ุฃุฎุฑู ููููู ุฅุฏุฎุงููุงุ ูุฐุง ุชุฃูุฏ ูู ุงูุงุทูุงุน ุนูู ุงููุงุฆูุฉ ุงููุงููุฉ ู[ุฏููู ุงูููุฒุงุช](./about_dataset_features) ููุฒูุฏ ูู ุงูุชูุงุตูู.
</Tip>

```py
def _info(self):
    return datasets.DatasetInfo(
        description=_DESCRIPTION,
        features=datasets.Features(
            {
                "speaker_id": datasets.Value("string"),
                "path": datasets.Value("string"),
                "audio": datasets.Audio(sampling_rate=16_000),
                "sentence": datasets.Value("string"),
            }
        ),
        supervised_keys=None,
        homepage=_HOMEPAGE,
        license=_LICENSE,
        citation=_CITATION,
    )
```

## ุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ุงูุชูุณููุงุช

ุงูุขู ุจุนุฏ ุฃู ุฃุถูุช ุจุนุถ ุงููุนูููุงุช ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุ ูุฅู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ุงูุชูุณููุงุช.

1. ุงุณุชุฎุฏู ุทุฑููุฉ [~DownloadManager.download] ูุชูุฒูู ููู ุงูุจูุงูุงุช ุงููุตููุฉ ูู _PROMPTS_URLS ูุฃุฑุดูู TAR ุงูุตูุชู ูู _DATA_URL. ุชุนูุฏ ูุฐู ุงูุทุฑููุฉ ูุณุงุฑ ุงูููู/ุงูุฃุฑุดูู ุงููุญูู. ูู ูุถุน ุงูุจุซุ ูุง ูููู ุจุชูุฒูู ุงูููู (ุงููููุงุช) ููุนูุฏ ููุท ุนููุงู URL ููุจุซ ููู. ุชูุจู ูุฐู ุงูุทุฑููุฉ ูุง ููู:

* ูุณุงุฑ ูุณุจู ูููู ุฏุงุฎู ูุณุชูุฏุน ูุฌููุนุฉ ุจูุงูุงุช Hub (ุนูู ุณุจูู ุงููุซุงูุ ูู ูุฌูุฏ "data/")
* ุนููุงู URL ูููู ูุณุชุถุงู ูู ููุงู ุขุฎุฑ
* ูุงุฆูุฉ (ููุนุดููุดุฉ) ุฃู ูุงููุณ ุจุฃุณูุงุก ุงููููุงุช ุฃู ุนูุงููู URL

2. ุจุนุฏ ุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุชุ ุงุณุชุฎุฏู [SplitGenerator] ูุชูุธูู ูููุงุช ุงูุตูุช ูุนุจุงุฑุงุช ุงููุทุงูุจุฉ ูู ูู ุชูุณูู. ูู ุจุชุณููุฉ ูู ุชูุณูู ุจุงุณู ููุงุณู ูุซู: `Split.TRAIN`ุ `Split.TEST`ุ ู`SPLIT.Validation`.

ูู ูุนููุฉ `gen_kwargs`ุ ุญุฏุฏ ูุณุงุฑ ุงูููู ุฅูู `prompts_path` ู`path_to_clips`. ุจุงููุณุจุฉ ุฅูู `audio_files`ุ ุณุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู [~DownloadManager.iter_archive] ููุชููู ุฎูุงู ูููุงุช ุงูุตูุช ูู ุฃุฑุดูู TAR. ููููู ูุฐุง ุงูุจุซ ููุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. ูุชู ุชูุฑูุฑ ุฌููุน ูุณุงุฑุงุช ุงููููุงุช ูุฐู ุฅูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุญูุซ ุชููู ูุนูููุง ุจุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช.

```py
def _split_generators(self, dl_manager):
    """Returns SplitGenerators."""
    prompts_paths = dl_manager.download(_PROMPTS_URLS)
    archive = dl_manager.download(_DATA_URL)
    train_dir = "vivos/train"
    test_dir = "vivos/test"

    return [
        datasets.SplitGenerator(
            name=datasets.Split.TRAIN,
            gen_kwargs={
                "prompts_path": prompts_paths["train"],
                "path_to_clips": train_dir + "/waves",
                "audio_files": dl_manager.iter_archive(archive),
            },
        ),
        datasets.SplitGenerator(
            name=datasets.Split.TEST,
            gen_kwargs={
                "prompts_path": prompts_paths["test"],
                "path_to_clips": test_dir + "/waves",
                "audio_files": dl_manager.iter_archive(archive),
            },
        ),
    ]
```

<Tip warning={true}>
ูุง ูููู ูุฐุง ุงูุชูููุฐ ุจุงุณุชุฎุฑุงุฌ ุงูุฃุฑุดููุงุช ุงูุชู ุชู ุชูุฒูููุง. ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฑุงุฌ ุงููููุงุช ุจุนุฏ ุงูุชูุฒููุ ููุฌุจ ุนููู ุฃูุถูุง ุงุณุชุฎุฏุงู [~DownloadManager.extract]ุ ุฑุงุฌุน ูุณู [(Advanced) Extract TAR archives](#advanced-extract-tar-archives-locally).
</Tip>

## ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช

ุชุนุฏ ุทุฑููุฉ [GeneratorBasedBuilder] ุงูุฃุฎูุฑุฉ ูู ุงููุฆุฉ ูู ุงูุชู ุชููู ุจุงููุนู ุจุชูููุฏ ุงูุนููุงุช ูู ูุฌููุนุฉ ุงูุจูุงูุงุช. ูููู ุจุฅูุชุงุฌ ูุฌููุนุฉ ุจูุงูุงุช ููููุง ูููููู ุงููุญุฏุฏ ูู `features` ูู ุทุฑููุฉ "info". ููุง ุชุฑูุ ุชูุจู `generate_examples` `prompts_path`ุ ู`path_to_clips`ุ ู`audio_files` ูู ุงูุทุฑููุฉ ุงูุณุงุจูุฉ ูุญุฌุฌ.

ูุชู ุงููุตูู ุฅูู ุงููููุงุช ุฏุงุฎู ุฃุฑุดููุงุช TAR ูุฅูุชุงุฌูุง ุจุงูุชุชุงุจุน. ููุฐุง ูุนูู ุฃูู ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงููุตููุฉ ุงููุฑุชุจุทุฉ ุจูููุงุช ุงูุตูุช ูู ููู TAR ูู ูุชูุงูู ุงููุฏ ุฃููุงู ุญุชู ุชุชููู ูู ุฅูุชุงุฌูุง ูุน ููู ุงูุตูุช ุงูููุงุจู ููุง.

```py
examples = {}
with open(prompts_path, encoding="utf-8") as f:
    for row in f:
        data = row.strip().split(" ", 1)
        speaker_id = data[0].split("_")[0]
        audio_path = "/".join([path_to_clips, speaker_id, data[0] + ".wav"])
        examples[audio_path] = {
            "speaker_id": speaker_id,
            "path": audio_path,
            "sentence": data[1],
        }
```

ุฃุฎูุฑูุงุ ูู ุจุงูุชููู ุฎูุงู ุงููููุงุช ูู `audio_files` ูุฅูุชุงุฌูุง ูุน ุงูุจูุงูุงุช ุงููุตููุฉ ุงูููุงุจูุฉ. ูุนูุฏ [~DownloadManager.iter_archive] ุฒูุฌูุง ูู (`path`ุ `f`) ุญูุซ `path` ูู ูุณุงุฑ **ูุณุจู** ุฅูู ููู ุฏุงุฎู ุฃุฑุดูู TAR ู`f` ูู ูุงุฆู ุงูููู ููุณู.

```py
inside_clips_dir = False
id_ = 0
for path, f in audio_files:
    if path.startswith(path_to_clips):
        inside_clips_dir = True
        if path in examples:
            audio = {"path": path, "bytes": f.read()}
            yield id_, {**examples[path], "audio": audio}
            id_ += 1
    elif inside_clips_dir:
        break
```

ุถุน ูุงุชูู ุงูุฎุทูุชูู ูุนูุงุ ููุฌุจ ุฃู ุชุจุฏู ุทุฑููุฉ `_generate_examples` ุงููุงููุฉ ููุง ููู:

```py
def _generate_examples(self, prompts_path, path_to_clips, audio_files):
    """Yields examples as (key, example) tuples."""
    examples = {}
    with open(prompts_path, encoding="utf-8") as f:
        for row in f:
            data = row.strip().split(" ", 1)
            speaker_id = data[0].split("_")[0]
            audio_path = "/".join([path_to_clips, speaker_id, data[0] + ".wav"])
            examples[audio_path] = {
                "speaker_id": speaker_id,
                "path": audio_path,
                "sentence": data[1],
            }
    inside_clips_dir = False
    id_ = 0
    for path, f in audio_files:
        if path.startswith(path_to_clips):
            inside_clips_dir = True
            if path in examples:
                audio = {"path": path, "bytes": f.read()}
                yield id_, {**examples[path], "audio": audio}
                id_ += 1
        elif inside_clips_dir:
            break
```

## ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุฅูู Hub

ุจูุฌุฑุฏ ุฃู ูููู ุจุฑูุงูุฌู ุฌุงูุฒูุงุ [ุฃูุดุฆ ุจุทุงูุฉ ูุฌููุนุฉ ุจูุงูุงุช](./dataset_card) ู[ุญููููุง ุฅูู Hub](./share).

ุชูุงูููุงุ ููููู ุงูุขู ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูู Hub! ๐ฅณ

```py
>>> from datasets import load_dataset
>>> load_dataset("<username>/my_dataset")
```

## (ูุชูุฏู) ุงุณุชุฎุฑุงุฌ ุฃุฑุดููุงุช TAR ูุญูููุง

ูู ุงููุซุงู ุฃุนูุงูุ ูุง ูุชู ุงุณุชุฎุฑุงุฌ ุงูุฃุฑุดููุงุช ุงูุชู ุชู ุชูุฒูููุง ูุจุงูุชุงูู ูุง ุชุญุชูู ุงูุนููุงุช ุนูู ูุนูููุงุช ุญูู ููุงู ุชุฎุฒูููุง ูุญูููุง.

ูุดุฑุญ ููููุฉ ุฅุฌุฑุงุก ุงูุงุณุชุฎุฑุงุฌ ุจุทุฑููุฉ ุชุฏุนู ุงูุจุซ ุฃูุถูุงุ ุณูููู ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ุจุฑูุงูุฌ ุชุญููู [LibriVox Indonesia](https://huggingface.co/datasets/indonesian-nlp/librivox-indonesia/blob/main/librivox-indonesia.py) ุงููุตู.

#### ุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ุงูุชูุณููุงุช

1. ุงุณุชุฎุฏู ุทุฑููุฉ [~DownloadManager.download] ูุชูุฒูู ุจูุงูุงุช ุงูุตูุช ูู _AUDIO_URL.

2. ูุงุณุชุฎุฑุงุฌ ุฃุฑุดูู ุงูุตูุช TAR ูุญูููุงุ ุงุณุชุฎุฏู [~DownloadManager.extract]. ููููู ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ููุท ูู ูุถุน ุนุฏู ุงูุจุซ (ุนูุฏูุง `dl_manager.is_streaming=False`). ูุนูุฏ ูุฐุง ูุณุงุฑูุง ูุญูููุง ุฅูู ุฏููู ุงูุฃุฑุดูู ุงููุณุชุฎุฑุฌ:

```py
local_extracted_archive = dl_manager.extract(audio_path) if not dl_manager.is_streaming else None
```

3. ุงุณุชุฎุฏู ุทุฑููุฉ [~DownloadManager.iter_archive] ููุชููู ุฎูุงู ุงูุฃุฑุดูู ูู `audio_path`ุ ุชูุงููุง ููุง ูู ูุซุงู Vivos ุฃุนูุงู. ูุง ูููุฑ [~DownloadManager.iter_archive] ุฃู ูุนูููุงุช ุญูู ุงููุณุงุฑุงุช ุงููุงููุฉ ูููููุงุช ูู ุงูุฃุฑุดููุ ุญุชู ุฅุฐุง ุชู ุงุณุชุฎุฑุงุฌู. ููุชูุฌุฉ ูุฐููุ ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑ ูุณุงุฑ `local_extracted_archive` ุฅูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู `gen_kwargs`ุ ูู ุฃุฌู ุงูุญูุงุธ ุนูู ุงููุนูููุงุช ุญูู ุงูููุงู ุงูุฐู ุชู ุงุณุชุฎุฑุงุฌ ุงูุฃุฑุดูู ุฅููู. ูุฐุง ูุทููุจ ูุจูุงุก ุงููุณุงุฑุงุช ุงูุตุญูุญุฉ ุฅูู ุงููููุงุช ุงููุญููุฉ ุนูุฏ ุฅูุดุงุก ุงูุนููุงุช.

<Tip warning={true}>
ุงูุณุจุจ ูู ุญุงุฌุชู ุฅูู ุงุณุชุฎุฏุงู ูุฒูุฌ ูู [~DownloadManager.download] ู[~DownloadManager.iter_archive] ูู ุฃูู ูุง ูููู ุงููุตูู ุฅูู ุงููููุงุช ูู ุฃุฑุดููุงุช TAR ูุจุงุดุฑุฉ ูู ุฎูุงู ูุณุงุฑุงุชูุง. ุจุฏูุงู ูู ุฐููุ ุณุชุญุชุงุฌ ุฅูู ุงูุชููู ุฎูุงู ุงููููุงุช ุฏุงุฎู ุงูุฃุฑุดูู! ููููู ุงุณุชุฎุฏุงู [~DownloadManager.download_and_extract] ู[~DownloadManager.extract] ูุน ุฃุฑุดููุงุช TAR ูู ูุถุน ุนุฏู ุงูุจุซ ููุทุ ูุฅูุง ูุณูุชู ุฅููุงุก ุฎุทุฃ.
</Tip>

4. ุงุณุชุฎุฏู ุทุฑููุฉ [~DownloadManager.download_and_extract] ูุชูุฒูู ููู ุงูุจูุงูุงุช ุงููุตููุฉ ุงููุญุฏุฏ ูู _METADATA_URL. ุชุนูุฏ ูุฐู ุงูุทุฑููุฉ ูุณุงุฑูุง ุฅูู ููู ูุญูู ูู ูุถุน ุนุฏู ุงูุจุซ. ูู ูุถุน ุงูุจุซุ ูุง ูููู ุจุชูุฒูู ุงูููู ูุญูููุง ููุนูุฏ ููุณ ุนููุงู URL.

5. ุงูุขู ุงุณุชุฎุฏู [SplitGenerator] ูุชูุธูู ูููุงุช ุงูุตูุช ูุงูุจูุงูุงุช ุงููุตููุฉ ูู ูู ุชูุณูู. ูู ุจุชุณููุฉ ูู ุชูุณูู ุจุงุณู ููุงุณู ูุซู: `Split.TRAIN`ุ `Split.TEST`ุ ู`SPLIT.Validation`.

ูู ูุนููุฉ `gen_kwargs`ุ ุญุฏุฏ ูุณุงุฑุงุช ุงููููุงุช ุฅูู `local_extracted_archive`ุ ู`audio_files`ุ ู`metadata_path`ุ ู`path_to_clips`. ุชุฐูุฑุ ุจุงููุณุจุฉ ุฅูู `audio_files`ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู [~DownloadManager.iter_archive] ููุชููู ุฎูุงู ูููุงุช ุงูุตูุช ูู ุฃุฑุดููุงุช TAR. ููููู ูุฐุง ุงูุจุซ ููุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู! ูุชู ุชูุฑูุฑ ุฌููุน ูุณุงุฑุงุช ุงููููุงุช ูุฐู ุฅูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุญูุซ ูุชู ุฅูุดุงุก ุนููุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช.

```py
def _split_generators(self, dl_manager):
    """Returns SplitGenerators."""
    dl_manager.download_config.ignore_url_params = True

    audio_path = dl_manager.download(_AUDIO_URL)
    local_extracted_archive = dl_manager.extract(audio_path) if not dl_manager.is_streaming else None
    path_to_clips = "librivox-indonesia"

    return [
        datasets.SplitGenerator(
            name=datasets.Split.TRAIN,
            gen_kwargs={
                "local_extracted_archive": local_extracted_archive,
                "audio_files": dl_manager.iter_archive(audio_path),
                "metadata_path": dl_manager.download_and_extract(_METADATA_URL + "/metadata_train.csv.gz"),
                "path_to_clips": path_to_clips,
            },
        ),
        datasets.SplitGenerator(
            name=datasets.Split.TEST,
            gen_kwargs={
                "local_extracted_archive": local_extracted_archive,
                "audio_files": dl_manager.iter_archive(audio_path),
                "metadata_path": dl_manager.download_and_extract(_METADATA_URL + "/metadata_test.csv.gz"),
                "path_to_clips": path_to_clips,
            },
        ),
    ]
```

#### ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช

ููุงุ ุชูุจู `_generate_examples` `local_extracted_archive`ุ ู`audio_files`ุ ู`metadata_path`ุ ู`path_to_clips` ูู ุงูุทุฑููุฉ ุงูุณุงุจูุฉ ูุญุฌุฌ.

1. ูุชู ุงููุตูู ุฅูู ูููุงุช TAR ูุฅูุชุงุฌูุง ุจุงูุชุชุงุจุน. ููุฐุง ูุนูู ุฃูู ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงููุตููุฉ ูู `metadata_path` ุงููุฑุชุจุทุฉ ุจูููุงุช ุงูุตูุช ูู ููู TAR ูู ูุชูุงูู ุงููุฏ ุฃููุงู ุญุชู ุชุชููู ูู ุฅูุชุงุฌูุง ูุน ููู ุงูุตูุช ุงูููุงุจู ููุง ูุงุญููุง:

```py
with open(metadata_path, "r", encoding="utf-8") as f:
    reader = csv.DictReader(f)
    for row in reader:
        if self.config.name == "all" or self.config.name == row["language"]:
            row["path"] = os.path.join(path_to_clips, row["path"])
            # if data is incomplete, fill with empty values
            for field in data_fields:
                if field not in row:
                    row[field] = ""
            metadata[row["path"]] = row
```

2. ุงูุขู ููููู ุฅูุชุงุฌ ุงููููุงุช ูู ุฃุฑุดูู `audio_files`. ุนูุฏูุง ุชุณุชุฎุฏู [~DownloadManager.iter_archive]ุ ูุฅูู ููุชุฌ ุฒูุฌูุง ูู (`path`ุ `f`) ุญูุซ `path` ูู ูุณุงุฑ **ูุณุจู** ุฅูู ููู ุฏุงุฎู ุงูุฃุฑุดููุ ู`f` ูู ูุงุฆู ุงูููู ููุณู. ููุญุตูู ุนูู ุงููุณุงุฑ **ุงููุงูู** ุฅูู ุงูููู ุงููุณุชุฎุฑุฌ ูุญูููุงุ ูู ุจุฏูุฌ ูุณุงุฑ ุงูุฏููู (`local_extracted_path`) ุงูุฐู ุชู ุงุณุชุฎุฑุงุฌ ุงูุฃุฑุดูู ุฅููู ููุณุงุฑ ููู ุงูุตูุช ุงููุณุจู (`path`):

```py
for path, f in audio_files:
    if path in metadata:
        result = dict(metadata[path])
        # set the audio feature and the path to the extracted file
        path = os.path.join(local_extracted_archive, path) if local_extracted_archive else path
        result["audio"] = {"path": path, "bytes": f.read()}
        result["path"] = path
        yield id_, result
        id_ += 1
````

ุถุน ูุงุชูู ุงูุฎุทูุชูู ูุนูุงุ ููุฌุจ ุฃู ุชุจุฏู ุทุฑููุฉ `_generate_examples` ุงููุงููุฉ ููุง ููู:

```py
def _generate_examples(
        self,
        local_extracted_archive,
        audio_files,
        metadata_path,
        path_to_clips,
    ):
        """Yields examples."""
        data_fields = list(self._info().features.keys())
        metadata = {}
        with open(metadata_path, "r", encoding="utf-8") as f:
            reader = csv.DictReader(f)
            for row in reader:
                if self.config.name == "all" or self.config.name == row["language"]:
                    row["path"] = os.path.join(path_to_clips, row["path"])
                    # if data is incomplete, fill with empty values
                    for field in data_fields:
                        if field not in row:
                            row[field] = ""
                    metadata[row["path"]] = row
        id_ = 0
        for path, f in audio_files:
            if path in metadata:
                result = dict(metadata[path])
                # set the audio feature and the path to the extracted file
                path = os.path.join(local_extracted_archive, path) if local_extracted_archive else path
                result["audio"] = {"path": path, "bytes": f.read()}
                result["path"] = path
                yield id_, result
                id_ += 1
```
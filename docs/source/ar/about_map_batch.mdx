# Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¯ÙØ¹ÙŠ

Ø¥Ù† Ø§Ù„Ø¬Ù…Ø¹ Ø¨ÙŠÙ† ÙØ§Ø¦Ø¯Ø© [`Dataset.map`] ÙˆÙˆØ¶Ø¹ Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø£Ù…Ø± Ù‚ÙˆÙŠ Ù„Ù„ØºØ§ÙŠØ©. ÙÙ‡Ùˆ ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©ØŒ ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø¨Ø­Ø±ÙŠØ© ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù†Ø§ØªØ¬Ø©.

## Ø§Ù„Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø©

Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù…Ù† Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¯ÙØ¹ÙŠ Ù‡Ùˆ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©. ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¯ÙØ¹Ø§Øª Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø£Ù…Ø«Ù„Ø© ÙØ±Ø¯ÙŠØ©. ÙˆØ¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠØŒ ÙŠÙ†Ø§Ø³Ø¨ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¯ÙØ¹ÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ¬Ø²Ø¦Ø© Ø¥Ù„Ù‰ Ø±Ù…ÙˆØ². Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ ØªØ¹Ù…Ù„ Ù…ÙƒØªØ¨Ø© ğŸ¤— [Tokenizers](https://huggingface.co/docs/tokenizers/python/latest/) Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø±Ø¹ Ù…Ø¹ Ø§Ù„Ø¯ÙØ¹Ø§Øª Ù„Ø£Ù†Ù‡Ø§ ØªÙˆØ§Ø²ÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ¬Ø²Ø¦Ø© Ø¥Ù„Ù‰ Ø±Ù…ÙˆØ² Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹Ø©.

## Ø­Ø¬Ù… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ != Ø­Ø¬Ù… Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ (Input size != output size)

ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù†Ø§ØªØ¬Ø© ÙÙŠ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø«ÙŠØ±Ø© Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…. ÙÙŠ Ù‚Ø³Ù… ÙƒÙŠÙÙŠØ© [Ø§Ù„Ø±Ø³Ù…](#map)ØŒ Ù‡Ù†Ø§Ùƒ Ø£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¯ÙØ¹ÙŠ Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ù…Ø§ ÙŠÙ„ÙŠ:

- ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ø·ÙˆÙŠÙ„Ø© Ø¥Ù„Ù‰ Ù…Ù‚Ø§Ø·Ø¹ Ø£Ù‚ØµØ±.
- Ø²ÙŠØ§Ø¯Ø© Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù…ÙˆØ² Ø¥Ø¶Ø§ÙÙŠØ©.

Ù…Ù† Ø§Ù„Ù…ÙÙŠØ¯ ÙÙ‡Ù… ÙƒÙŠÙÙŠØ© Ø¹Ù…Ù„ Ø°Ù„ÙƒØŒ Ø­ØªÙ‰ ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø¨ØªÙƒØ§Ø± Ø·Ø±Ù‚Ùƒ Ø§Ù„Ø®Ø§ØµØ© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¯ÙØ¹ÙŠ. ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŒ Ù‚Ø¯ ØªØªØ³Ø§Ø¡Ù„ Ø¹Ù† ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù†Ø§ØªØ¬Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ: **Ù„Ø§ ÙŠÙ„Ø²Ù… Ø£Ù† ØªØ¹ÙŠØ¯ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø© Ø¥Ø®Ø±Ø§Ø¬ Ø¯ÙØ¹Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ø­Ø¬Ù…**.

Ø¨Ù…Ø¹Ù†Ù‰ Ø¢Ø®Ø±ØŒ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø© Ø¯ÙØ¹Ø© Ø¨Ø­Ø¬Ù… `N` ÙˆØªØ¹ÙŠØ¯ Ø¯ÙØ¹Ø© Ø¨Ø­Ø¬Ù… `M`. ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ `M` Ø£ÙƒØ¨Ø± Ø£Ùˆ Ø£Ù‚Ù„ Ù…Ù† `N`. ÙˆÙ‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ ÙŠÙ…ÙƒÙ†Ùƒ Ø¯Ù…Ø¬ Ø£Ù…Ø«Ù„ÙƒØŒ ÙˆØªÙ‚Ø³ÙŠÙ…Ù‡Ø§ØŒ ÙˆØ­ØªÙ‰ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù…Ø«Ù„Ø©!

ÙˆÙ…Ø¹ Ø°Ù„ÙƒØŒ ØªØ°ÙƒØ± Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ **Ù†ÙØ³ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±** Ù…Ø«Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰ ÙÙŠ Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬. ÙˆØ¥Ù„Ø§ØŒ Ù„Ù† ÙŠÙƒÙˆÙ† Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ø°ÙŠ ØªØ¹ÙŠØ¯Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø©. ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ®ØªÙ„Ù Ø§Ù„Ø¹Ø¯Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ø§Ù„ØªÙŠ ØªØ¹Ø§Ù„Ø¬Ù‡Ø§ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø©. ÙˆÙ„ÙƒÙ† Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø©ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ø¬Ù…ÙŠØ¹ Ù‚ÙŠÙ… Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ù†ÙØ³ Ø§Ù„Ø·ÙˆÙ„ (Ø£ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±).

Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙƒÙˆÙ†Ø© Ù…Ù† Ø¹Ù…ÙˆØ¯ ÙˆØ§Ø­Ø¯ Ùˆ3 ØµÙÙˆÙØŒ Ø¥Ø°Ø§ Ø§Ø³ØªØ®Ø¯Ù…Øª `map` Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø¹Ù…ÙˆØ¯ Ø¬Ø¯ÙŠØ¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¶Ø¹Ù Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙØŒ ÙØ³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø®Ø·Ø£.

ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¹Ù…ÙˆØ¯ ÙˆØ§Ø­Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 3 ØµÙÙˆÙØŒ ÙˆØ¹Ù…ÙˆØ¯ Ø¢Ø®Ø± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 6 ØµÙÙˆÙ. ÙƒÙ…Ø§ ØªØ±Ù‰ØŒ Ù„Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø¬Ø¯ÙˆÙ„ ØµØ§Ù„Ø­Ù‹Ø§:

```py
>>> from datasets import Dataset
>>> dataset = Dataset.from_dict({"a": [0, 1, 2]})
>>> dataset.map(lambda batch: {"b": batch["a"] * 2}, batched=True)  # new column with 6 elements: [0, 1, 2, 0, 1, 2]
'ArrowInvalid: Column 1 named b expected length 3 but got length 6'
```

Ù„Ø¬Ø¹Ù„Ù‡ ØµØ§Ù„Ø­Ù‹Ø§ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¥Ø³Ù‚Ø§Ø· Ø£Ø­Ø¯ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠÙ†:

```py
>>> from datasets import Dataset
>>> dataset = Dataset.from_dict({"a": [0, 1, 2]})
>>> dataset_with_duplicates = dataset.map(lambda batch: {"b": batch["a"] * 2}, remove_columns=["a"], batched=True)
>>> len(dataset_with_duplicates)
6
```
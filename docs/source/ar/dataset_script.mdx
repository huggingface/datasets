# ุฅูุดุงุก ูุต ุจุฑูุฌู ูุชุญููู ูุฌููุนุฉ ุจูุงูุงุช

<Tip>

ูู ุงููุญุชูู ุฃูุง ุชููู ููุงู ุญุงุฌุฉ ุฅูู ุงููุต ุงูุจุฑูุฌู ูุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุฅุฐุง ูุงูุช ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุจุฅุญุฏู ุงูุตูุบ ุงูุชุงููุฉ: CSV ุฃู JSON ุฃู ุฃุณุทุฑ JSON ุฃู ูุต ุฃู ุตูุฑ ุฃู ุตูุช ุฃู Parquet.

ูุน ูุฐู ุงูุตูุบุ ูุฌุจ ุฃู ุชุชููู ูู ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุชููุงุฆููุง ุจุงุณุชุฎุฏุงู [`~datasets.load_dataset`]ุ ุทุงููุง ุฃู ูุณุชูุฏุน ูุฌููุนุฉ ุงูุจูุงูุงุช ูุฏูู ูุญุชูู ุนูู [ูููู ูุทููุจ](./repository_structure).

</Tip>

<Tip warning=true>

ูุฃุณุจุงุจ ุฃูููุฉุ ูุง ุชุณูุญ ูุฌููุนุงุช ุงูุจูุงูุงุช ๐ค ุจุชุดุบูู ูุตูุต ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ุจุดูู ุงูุชุฑุงุถูุ ููุฌุจ ุนููู ุชูุฑูุฑ `trust_remote_code=True` ูุชุญููู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชู ุชุชุทูุจ ุชุดุบูู ูุต ูุฌููุนุฉ ุจูุงูุงุช.

</Tip>

ุงูุชุจ ูุต ูุฌููุนุฉ ุจูุงูุงุช ูุชุญููู ููุดุงุฑูุฉ ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชู ุชุชููู ูู ูููุงุช ุจูุงูุงุช ุจุชูุณููุงุช ุบูุฑ ูุฏุนููุฉ ุฃู ุชุชุทูุจ ุฅุนุฏุงุฏ ุจูุงูุงุช ุฃูุซุฑ ุชุนููุฏูุง.

ูุฐู ุทุฑููุฉ ุฃูุซุฑ ุชูุฏููุง ูุชุญุฏูุฏ ูุฌููุนุฉ ุจูุงูุงุช ูู ุงุณุชุฎุฏุงู [ุจูุงูุงุช ุงูุชุนุฑูู YAML ูู ุจุทุงูุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช](./repository_structure#define-your-splits-in-yaml).

ูุต ูุฌููุนุฉ ุงูุจูุงูุงุช ูู ููู Python ูุญุฏุฏ ุงูุชููููุงุช ูุงูุชูุณููุงุช ุงููุฎุชููุฉ ููุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุ ุจุงูุฅุถุงูุฉ ุฅูู ููููุฉ ุชูุฒูู ุงูุจูุงูุงุช ููุนุงูุฌุชูุง.

ูููู ูููุต ุงูุจุฑูุฌู ุชูุฒูู ูููุงุช ุงูุจูุงูุงุช ูู ุฃู ูููุน ููุจุ ุฃู ูู ูุณุชูุฏุน ูุฌููุนุฉ ุงูุจูุงูุงุช ููุณู.

ูุฌุจ ุฃู ูุญูู ูุต ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช ููุณ ุงุณู ูุณุชูุฏุน ูุฌููุนุฉ ุงูุจูุงูุงุช ุฃู ุงูุฏููู. ุนูู ุณุจูู ุงููุซุงูุ ูุฌุจ ุฃู ูุญุชูู ุงููุณุชูุฏุน ุงููุณูู "my_dataset" ุนูู ูุต ุจุฑูุฌู ูุณูู "my_dataset.py". ุจูุฐู ุงูุทุฑููุฉ ูููู ุชุญูููู ุจุงุณุชุฎุฏุงู:

```
my_dataset/
โโโ README.md
โโโ my_dataset.py
```

```py
>>> from datasets import load_dataset
>>> load_dataset("path/to/my_dataset")
```

ุชุดูู ุงูุฅุฑุดุงุฏุงุช ุงูุชุงููุฉ ุชุนูููุงุช ููุตูุต ูุฌููุนุฉ ุงูุจูุงูุงุช ุญูู ููููุฉ:

- ุฅุถุงูุฉ ุจูุงูุงุช ุงูุชุนุฑูู ุงูุฎุงุตุฉ ุจูุฌููุนุฉ ุงูุจูุงูุงุช.
- ุชูุฒูู ูููุงุช ุงูุจูุงูุงุช.
- ุฅูุดุงุก ุนููุงุช.
- ุฅูุดุงุก ุจูุงูุงุช ุงูุชุนุฑูู ููุฌููุนุฉ ุงูุจูุงูุงุช.
- ุชุญููู ูุฌููุนุฉ ุจูุงูุงุช ุฅูู Hub.

ุงูุชุญ ูุงูุจ ูุต ุชุญููู ูุฌููุนุฉ ุจูุงูุงุช SQuAD [https://huggingface.co/datasets/squad/blob/main/squad.py] ููุชุงุจุนุฉ ููููุฉ ูุดุงุฑูุฉ ูุฌููุนุฉ ุจูุงูุงุช.

<Tip>

ูููุณุงุนุฏุฉ ูู ุงูุจุฏุกุ ุฌุฑูุจ ุงูุจุฏุก ุจูุงูุจ ูุต ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช [https://github.com/huggingface/datasets/blob/main/templates/new_dataset_script.py]!

</Tip>

## ุฅุถุงูุฉ ุณูุงุช ูุฌููุนุฉ ุงูุจูุงูุงุช

ุงูุฎุทูุฉ ุงูุฃููู ูู ุฅุถุงูุฉ ุจุนุถ ุงููุนูููุงุชุ ุฃู ุงูุณูุงุชุ ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูู [`DatasetBuilder._info`]. ุฃูู ุงูุณูุงุช ุงูุชู ูุฌุจ ุนููู ุชุญุฏูุฏูุง ูู:

1. `DatasetInfo.description` ูููุฑ ูุตููุง ููุฌุฒูุง ููุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. ููุนูู ุงููุตู ุงููุณุชุฎุฏู ุจูุง ููุฌุฏ ูู ูุฌููุนุฉ ุงูุจูุงูุงุชุ ูููู ุชู ุฌูุนูุงุ ูููู ูููู ุงุณุชุฎุฏุงููุง ููููุฉ NLP.

2. `DatasetInfo.features` ูุญุฏุฏ ุงุณู ูููุน ูู ุนููุฏ ูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู. ุณูููุฑ ูุฐุง ุฃูุถูุง ุงููููู ููู ูุซุงูุ ูุฐูู ูู ุงููููู ุฅูุดุงุก ุญููู ูุฑุนูุฉ ูุชุฏุงุฎูุฉ ูู ุนููุฏ ุฅุฐุง ุฃุฑุฏุช. ุฑุงุฌุน [`Features`] ููุญุตูู ุนูู ูุงุฆูุฉ ูุงููุฉ ุจุฃููุงุน ุงูููุฒุงุช ุงูุชู ููููู ุงุณุชุฎุฏุงููุง.

```py
datasets.Features(
{
"id": datasets.Value("string"),
"title": datasets.Value("string"),
"context": datasets.Value("string"),
"question": datasets.Value("string"),
"answers": datasets.Sequence(
{
"text": datasets.Value("string"),
"answer_start": datasets.Value("int32"),
}
),
}
)
```

3. `DatasetInfo.homepage` ูุญุชูู ุนูู ุนููุงู URL ูุตูุญุฉ ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ุญุชู ูุชููู ุงููุณุชุฎุฏููู ูู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ูุฌููุนุฉ ุงูุจูุงูุงุช.

4. `DatasetInfo.citation` ูุญุชูู ุนูู ุงูุชุจุงุณ BibTeX ููุฌููุนุฉ ุงูุจูุงูุงุช.

ุจุนุฏ ููุก ุฌููุน ูุฐู ุงูุญููู ูู ุงููุงูุจุ ูุฌุจ ุฃู ูุจุฏู ูุซู ุงููุซุงู ุงูุชุงูู ูู ูุต ุชุญููู SQuAD:

```py
def _info(self):
return datasets.DatasetInfo(
description=_DESCRIPTION,
features=datasets.Features(
{
"id": datasets.Value("string"),
"title": datasets.Value("string"),
`````
## ุงูููุฒุงุช ุงููุชูุฏูุฉ

### ุงูุชุฌุฒุฆุฉ

ุฅุฐุง ูุงูุช ูุฌููุนุฉ ุจูุงูุงุชู ุชุชููู ูู ุงูุนุฏูุฏ ูู ุงููููุงุช ุงููุจูุฑุฉุ ูุฅู ููุชุจุฉ ๐ค Datasets ุชุดุบู ุณูุฑุจุช ุงูุฎุงุต ุจุดูู ูุชูุงุฒู ุชููุงุฆููุง ูุฌุนูู ุณุฑูุนูุง ููุบุงูุฉ!
ูููู ุฃู ูููู ูุฐุง ูููุฏูุง ุฅุฐุง ูุงู ูุฏูู ูุฆุงุช ุฃู ุขูุงู ูู ุฃุฑุดููุงุช TARุ ุฃู ูููุงุช JSONL ูุซู [oscar](https://huggingface.co/datasets/oscar/blob/main/oscar.py) ุนูู ุณุจูู ุงููุซุงู.

ููุฌุนููุง ุชุนููุ ูุนุชุจุฑ ููุงุฆู ุงููููุงุช ูู `gen_kwargs` ุนูู ุฃููุง ุดุธุงูุง.
ูุฐูู ูููู ูู ๐ค Datasets ุฃู ุชูุดุฆ ุชููุงุฆููุง ุนุฏุฉ ูุญุฏุงุช ุนูู ูุชุดุบูู `_generate_examples` ุจุดูู ูุชูุงุฒูุ ููุชู ููุญ ูู ูุญุฏุฉ ุนูู ูุฌููุนุฉ ูุฑุนูุฉ ูู ุงูุดุธุงูุง ูุชุฌููุฒูุง.

```python
class MyShardedDataset(datasets.GeneratorBasedBuilder):
    def _split_generators(self, dl_manager: datasets.DownloadManager) -> List[datasets.SplitGenerator]:
        downloaded_files = dl_manager.download([f"data/shard_{i}.jsonl" for i in range(1024)])
        return [
            datasets.SplitGenerator(name=datasets.Split.TRAIN, gen_kwargs={"filepaths": downloaded_files}),
        ]

    def _generate_examples(self, filepaths):
        # ูููู ููุญ ูู ูุญุฏุฉ ุนูู ุดุฑูุญุฉ ูู ูุงุฆูุฉ 'filepaths' ุงูุฃุตููุฉ ุงููุญุฏุฏุฉ ูู 'gen_kwargs'
        # ุจุญูุซ ูููู ุชุดุบูู ูุฐุง ุงูููุฏ ุจุดูู ูุชูุงุฒู ุนูู ุนุฏุฉ ุดุธุงูุง ูู ููุณ ุงูููุช
        for filepath in filepaths:
            ...
```

ูููู ูููุณุชุฎุฏููู ุฃูุถูุง ุชุญุฏูุฏ `num_proc=` ูู `load_dataset()` ูุชุญุฏูุฏ ุนุฏุฏ ุงูุนูููุงุช ุงูุชู ุณูุชู ุงุณุชุฎุฏุงููุง ููุญุฏุงุช ุนูู.

### ArrowBasedBuilder

ุจุงููุณุจุฉ ูุจุนุถ ูุฌููุนุงุช ุงูุจูุงูุงุชุ ูุฏ ูููู ูู ุงูุฃุณุฑุน ุจูุซูุฑ ุฅูุชุงุฌ ุฏูุนุงุช ูู ุงูุจูุงูุงุช ุจุฏูุงู ูู ุงูุฃูุซูุฉ ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ.
ููููู ุชุณุฑูุน ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช ุนู ุทุฑูู ุฅูุชุงุฌ ุฌุฏุงูู Arrow ูุจุงุดุฑุฉูุ ุจุฏูุงู ูู ุงูุฃูุซูุฉ.
ููุฐุง ูููุฏ ุจุดูู ุฎุงุต ุฅุฐุง ูุงูุช ุจูุงูุงุชู ุชุฃุชู ูู Pandas DataFrames ุนูู ุณุจูู ุงููุซุงูุ ุญูุซ ุฃู ุงูุชุญููู ูู Pandas ุฅูู Arrow ุจุณูุท ูุซู:

```python
import pyarrow as pa
pa_table = pa.Table.from_pandas(df)
```

ูุฅูุชุงุฌ ุฌุฏุงูู Arrow ุจุฏูุงู ูู ุงูุฃูุซูุฉ ุงููุฑุฏูุฉุ ูู ุจุฌุนู ุจุฑูุงูุฌ ุฅูุดุงุก ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ูุฑุซ ูู [`ArrowBasedBuilder`] ุจุฏูุงู ูู [`GeneratorBasedBuilder`]. ูุงุณุชุฎุฏู `_generate_tables` ุจุฏูุงู ูู `_generate_examples`:

```python
class MySuperFastDataset(datasets.ArrowBasedBuilder):
    def _generate_tables(self, filepaths):
        idx = 0
        for filepath in filepaths:
            ...
            yield idx, pa_table
            idx += 1
```

ูุง ุชูุณ ุฃู ุชุฌุนู ุณูุฑุจุช ุงูุฎุงุต ุจู ูุนุงูุงู ูู ุญูุซ ุงูุฐุงูุฑุฉุ ูู ุญุงูุฉ ุชุดุบูู ุงููุณุชุฎุฏููู ููุง ุนูู ุฃุฌูุฒุฉ ุฐุงุช ูููุฉ ููุฎูุถุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู.